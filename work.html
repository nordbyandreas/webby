<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <title>Tinc. || Webby</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/hex.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  </head>

  <body>
		<div class="wrapper">

  <!-- header included with the include.js-script -->
		    <header id="header">
		    </header>

			<div class="content">

                <h1 class="pageTitle">Our Work</h1>

      <!-- ADD PAGE CONTENT  HERE :DDD -->
                    <div id = "container">

                    </div>

                    <script>

                        function set_hex_style(){
                            var hex0 = document.getElementsByClassName("hex0");
                            var hex1 = document.getElementsByClassName("hex1");
                            var hex2 = document.getElementsByClassName("hex2");

                            for(i=0; i<hex0.length; i++) {
                                hex0[i].style.marginTop = "-7.4em";
                            }

                            hex0.style.marginTop = "-7.4em";
                            hex0.style.marginLeft = "0em";
                            hex0.style.display = "inline-block";

                            hex0.style.width = "12em";
                            hex0.style.height = "15em";

                            hex0.style.overflow = "hidden";
                            hex1.style.overflow = "hidden";
                            hex2.style.overflow = "hidden";

                            hex0.style.transform = "rotate(-120deg)";
                            hex1.style.transform = "rotate(60deg)";
                            hex2.style.transform = "rotate(60deg)";

                            var img = document.getElementsByClassName("galleryImage");
                            img.style.width = "auto";
                            img.style.height = "100%";
                        }

                        function new_hex(){
                            var hex0 = document.createElement("div");
                            var hex1 = document.createElement("div");
                            var hex2 = document.createElement("div");

                            var img = document.createElement("img");
                            img.className = "galleryImage";
                            img.src = "./img/LEGOs.jpg";

                            hex0.className = "hex0";
                            hex1.className = "hex1";
                            hex2.className = "hex2";

                            hex2.appendChild(img);
                            hex1.appendChild(hex2);
                            hex0.appendChild(hex1);

                            return hex0
                        }

                        function clear_container(){
                            var container = document.getElementById("container");
                            var children = container.children;
                            while(children.length > 0){
                                children[0].parentNode.removeChild(elements[0]);
                            }
                        }

                        function fill_cont(){
                            for (i = 0; i <20; i++){
                                var hex0 = new_hex();
                                var container = document.getElementById("container");
                                container.appendChild(hex0);
                            }
                        }

                        function remove_elements_by_class(class_name){
                            var elements = document.getElementsByClassName(class_name);
                            while(elements.length > 0){
                                elements[0].parentNode.removeChild(elements[0]);
                            }
                        }
                        function add_linebreak(index){
                            var container = document.getElementById("container");
                            var linebreak = document.createElement("br");
                            linebreak.className = "breakline";
                            container.insertBefore(linebreak, container.children[index]);
                        }

                        function get_hex_in_width() {
                            var container = document.getElementById("container");
                            var c_width = container.offsetWidth;

                            var hex = document.getElementsByClassName("hex0");
                            var h_width = hex.item(1).offsetWidth;

                            var hex_in_width = Math.floor(c_width/h_width);

                            return hex_in_width
                        }

                        function resize() {
                            remove_elements_by_class("breakline");

                            console.log("RESIZE");
                            var hex_in_width = get_hex_in_width();

                            if (window.innerWidth < 570){
                            //if (hex_in_width < 3){
                                return //TODO: TRANSFORM INTO SQUARES
                            }

                            var container = document.getElementById("container");
                            var i = hex_in_width -1;

                            while (i < container.childElementCount) {
                                add_linebreak(i);
                                i += hex_in_width + 1;
                                add_linebreak(i);
                                i += hex_in_width;
                            }
                        }

                        var doit;
                        var onresize = function(e) {
                            clearTimeout(doit);
                            doit = setTimeout(resize, 50);
                        }

                        window.addEventListener("resize", onresize);

                        fill_cont();
                        set_hex_style();

                        resize();

                    </script>

			</div>


		</div>


      <!-- Footer included with the include.js-script -->
		<footer id="footer">
		</footer>
		<script type="text/javascript" src="js/include.js"></script>
  </body>

</html>
