<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <title>Tinc. || Webby</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/hex.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  </head>

  <body>
		<div id="wrapper">

  <!-- header included with the include.js-script -->
		    <header id="header">
		    </header>

			<div class="content">

                <h1 class="pageTitle">Our Work</h1>

      <!-- ADD PAGE CONTENT  HERE :DDD -->
                    <div id = "container">

                    </div>

                    <script>

                        var foundTreshold = false;
                        var treshold = 0;

                        function set_hex_style(){
                            var container = document.getElementById("container");
                            for (i = 0; i < container.length; i++){

                                var hex0 = container.children[i];
                                var hex1 = hex0.firstChild;
                                var hex2 = hex1.firstChild;

                                hex0.className = "hex0_large";
                                hex2.className = "hex1_large";
                                hex2.className = "hex1_large";

                            }
                        }

                        function set_square_style(){
                            var hex0 = document.getElementsByClassName("hex0_large");
                            var hex1 = document.getElementsByClassName("hex1_large");
                            var hex2 = document.getElementsByClassName("hex2_large");

                            for (i= 0; i < hex0.length; i++){
                                hex0[i].className = "hex0_small";
                            }
                            for (i= 0; i < hex1.length; i++){
                                hex1[i].className = "hex1_small";
                            }
                            for (i= 0; i < hex2.length; i++){
                                hex2[i].className = "hex2_small";
                            }
                        }

                        function new_hex(className){
                            var hex0 = document.createElement("div");
                            var hex1 = document.createElement("div");
                            var hex2 = document.createElement("div");

                            var img = document.createElement("img");
                            img.className = "galleryImage_" + className;
                            img.src = "./img/LEGOs.jpg";

                            hex0.className = "hex0_" + className;
                            hex1.className = "hex1_" + className;
                            hex2.className = "hex2_" + className;

                            hex2.appendChild(img);
                            hex1.appendChild(hex2);
                            hex0.appendChild(hex1);

                            return hex0
                        }

                        function clear_container(){
                            var container = document.getElementById("container");
                            var children = container.children;
                            while(children.length > 0){
                                children[0].parentNode.removeChild(children[0]);
                            }
                        }

                        function fill_cont(className){
                            for (i = 0; i <20; i++){
                                var hex0 = new_hex(className);
                                var container = document.getElementById("container");
                                container.appendChild(hex0);
                            }
                        }

                        function remove_elements_by_class(class_name){
                            var elements = document.getElementsByClassName(class_name);
                            while(elements.length > 0){
                                elements[0].parentNode.removeChild(elements[0]);
                            }
                        }
                        function add_linebreak(index){
                            var container = document.getElementById("container");
                            var linebreak = document.createElement("br");
                            linebreak.className = "breakline";
                            container.insertBefore(linebreak, container.children[index]);
                        }

                        function get_hex_in_width() {
                            var container = document.getElementById("container");
                            var font_size = window.getComputedStyle(container).getPropertyValue('font-size');

                            var c_width = container.offsetWidth;
                            var h_width = (12+0.5)*parseInt(font_size);
                            var hex_in_width = Math.floor(c_width/h_width);

                            console.log(hex_in_width)
                            return hex_in_width
                        }

                        function resize() {
                            remove_elements_by_class("breakline");

                            console.log("RESIZE");
                            var hex_in_width = get_hex_in_width();

                            if (hex_in_width < 3){

                                var wrapper = document.getElementById("wrapper");
                                wrapper.style.width = "100%";
                                clear_container();
                                fill_cont("small");
                                return;
                            }
                            else{
                                var wrapper = document.getElementById("wrapper");
                                wrapper.style.width = "90%";
                                clear_container();
                                fill_cont("large");

                            }

                            var container = document.getElementById("container");
                            var i = hex_in_width -1;

                            while (i < container.childElementCount) {
                                add_linebreak(i);
                                i += hex_in_width + 1;
                                add_linebreak(i);
                                i += hex_in_width;
                            }
                        }

                        var doit;
                        var onresize = function(e) {
                            clearTimeout(doit);
                            doit = setTimeout(resize, 50);
                        }

                        window.addEventListener("resize", onresize);

                        fill_cont("large");
                        resize();

                    </script>

			</div>


		</div>


      <!-- Footer included with the include.js-script -->
		<footer id="footer">
		</footer>
		<script type="text/javascript" src="js/include.js"></script>
  </body>

</html>
